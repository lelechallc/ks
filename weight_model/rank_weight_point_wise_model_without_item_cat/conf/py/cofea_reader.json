{
  "_DRAGONFLY_CREATE_TIME": "2024-04-08 19:33:21",
  "_DRAGONFLY_VERSION": "0.7.13",
  "kess_config": {},
  "pipeline_manager_config": {
    "base_pipeline": {
      "processor": {
        "data_sampler_filter": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "sample_filter_flag"
            ],
            "$modify_item_tables": [
              ""
            ],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "attr_name": "sample_filter_flag",
          "compare_to": 1,
          "remove_if": "==",
          "type_name": "CommonRecoAttrFilterArranger"
        },
        "enrich_attr_by_lua_280E6D": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "cancel_collect",
              "collect",
              "comment",
              "down_load",
              "effective_view",
              "feedback_negative",
              "follow",
              "forward",
              "forward_inside",
              "like",
              "long_view",
              "time_weight",
              "unfollow",
              "unlike"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "interact_label",
              "interact_weight"
            ]
          },
          "export_item_attr": [
            "interact_weight",
            "interact_label"
          ],
          "function_for_item": "calculate",
          "import_item_attr": [
            "like",
            "follow",
            "forward",
            "comment",
            "collect",
            "unfollow",
            "unlike",
            "cancel_collect",
            "feedback_negative",
            "forward_inside",
            "time_weight",
            "down_load",
            "effective_view",
            "long_view"
          ],
          "lua_script": "function calculate()\n        interact_label = 0\n        if (like > 0 or follow > 0 or forward > 0  or comment > 0 or collect > 0 or forward_inside > 0 or down_load > 0) and (effective_view > 0 or long_view > 0) then\n          interact_label = 1\n        end\n        interactive_weight = 1.0\n        if feedback_negative > 0 then\n          interact_label = 0\n          interactive_weight = 100.0\n        end\n        if interact_label > 0 then\n          if effective_view > 0 or long_view > 0 then\n            interactive_weight = interactive_weight + 1.0\n          end\n          if like > 0 then\n            interactive_weight = interactive_weight + 1.0\n          end\n          if follow > 0 then\n            interactive_weight = interactive_weight + 6.5\n          end\n          if forward > 0 then\n            interactive_weight = interactive_weight + 4.5\n          end\n          if comment > 0 then\n            interactive_weight = interactive_weight + 4.0\n          end\n          if collect > 0 then\n            interactive_weight = interactive_weight + 1.5\n          end\n          if forward_inside > 0 then\n            interactive_weight = interactive_weight + 6.0\n          end\n          if down_load > 0 then\n            interactive_weight = interactive_weight + 1.0\n          end\n        end\n        return interactive_weight, interact_label\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_2FE092": {
          "$metadata": {
            "$input_common_attrs": [
              "sample_rate"
            ],
            "$input_item_attrs": [
              "interact_label"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "sample_filter_flag"
            ]
          },
          "export_item_attr": [
            "sample_filter_flag"
          ],
          "function_for_item": "sample_process",
          "import_common_attr": [
            "sample_rate"
          ],
          "import_item_attr": [
            "interact_label"
          ],
          "lua_script": "function sample_process()\n        local sample_filter_flag = 0\n        if interact_label == 0 then\n          if math.random() > sample_rate then\n              sample_filter_flag = 1\n          end\n        end\n        return sample_filter_flag\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_627879": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "audit_b_second_tag",
              "cancel_collect",
              "collect",
              "comment",
              "follow",
              "like"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "audit_count",
              "collect",
              "comment",
              "follow",
              "like"
            ]
          },
          "export_item_attr": [
            "collect",
            "like",
            "follow",
            "comment",
            "audit_count"
          ],
          "function_for_item": "reset",
          "import_item_attr": [
            "collect",
            "cancel_collect",
            "like",
            "follow",
            "comment",
            "audit_b_second_tag"
          ],
          "lua_script": "function reset()\n        local audit_count = 0\n        if collect == 1 and cancel_collect == 1 then\n          collect = 0\n        end\n        if audit_b_second_tag == 2037808 or audit_b_second_tag == 2111600 then\n           like = 0\n           follow = 0\n           audit_count = audit_count + 1\n        end\n        if audit_b_second_tag == 2037809 or audit_b_second_tag == 2111602 then\n           follow = 0\n           audit_count = audit_count + 1\n        end\n        if audit_b_second_tag == 2037810 or audit_b_second_tag == 2111601 then\n           like = 0\n           audit_count = audit_count + 1\n        end\n        if audit_b_second_tag == 2037811 or audit_b_second_tag == 2111603 then\n           comment = 0\n           audit_count = audit_count + 1\n        end\n        if audit_b_second_tag == 2147251 then\n          like = 0\n          follow = 0\n          comment = 0\n          collect = 0\n        end\n        return collect, like, follow, comment, audit_count\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_7EDD6A": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "collect",
              "comment",
              "feedback_negative",
              "follow",
              "forward",
              "forward_inside",
              "like"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "collect",
              "comment",
              "follow",
              "forward",
              "forward_inside",
              "like"
            ]
          },
          "export_item_attr": [
            "like",
            "follow",
            "forward",
            "comment",
            "collect",
            "forward_inside"
          ],
          "function_for_item": "calculate",
          "import_item_attr": [
            "feedback_negative",
            "like",
            "follow",
            "forward",
            "comment",
            "collect",
            "forward_inside"
          ],
          "lua_script": "function calculate()\n        if feedback_negative > 0 then\n          return 0, 0, 0, 0, 0, 0, 0\n        else\n          return like, follow, forward, comment, collect, forward_inside\n        end\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_80AE48": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "discard",
              "dislike",
              "feedback_negative"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "feedback_negative"
            ]
          },
          "export_item_attr": [
            "feedback_negative"
          ],
          "function_for_item": "calculate",
          "import_item_attr": [
            "feedback_negative",
            "dislike",
            "discard"
          ],
          "lua_script": "function calculate()\n        feedback_negative = feedback_negative or 0\n        if feedback_negative > 0 or dislike > 0 or discard > 0 then\n          feedback_negative = 1\n        end\n        return feedback_negative\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_989895": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "duration_ms",
              "playing_time"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "effective_view"
            ]
          },
          "export_item_attr": [
            "effective_view"
          ],
          "function_for_item": "calculate",
          "import_item_attr": [
            "playing_time",
            "duration_ms"
          ],
          "lua_script": "function calculate()\n        effective_view = 0\n        if duration_ms < 7000 then\n          if playing_time > 7000 then\n            effective_view = 1\n          end\n        elseif duration_ms >= 7000 and duration_ms < 14000 then\n          if playing_time > 0.636788*duration_ms + 2417.629 then\n            effective_view = 1\n          end\n        elseif duration_ms >= 14000 and duration_ms < 93000 then\n          if playing_time > 0.104396*duration_ms + 8957.299 then\n            effective_view = 1\n          end\n        elseif duration_ms >= 93000 and duration_ms < 155000 then\n          if playing_time > -0.018168*duration_ms + 20215.178 then\n            effective_view = 1\n          end\n        elseif duration_ms >= 155000 and duration_ms < 220000 then\n          if playing_time > -0.072866*duration_ms + 28352.154 then\n            effective_view = 1\n          end\n        else\n          if playing_time > -0.038242*duration_ms + 21259.100 and playing_time > 7000 then\n            effective_view = 1\n          end\n        end\n        return effective_view\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_C3BBCE": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "label_names",
              "label_values"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "forward_inside_status"
            ]
          },
          "export_item_attr": [
            "forward_inside_status"
          ],
          "function_for_item": "calculate",
          "import_item_attr": [
            "label_names",
            "label_values"
          ],
          "lua_script": "function calculate()\n        local names = label_names or {}\n        if #names == 0 then\n          return 0, 0\n        end\n        forward_status = 0\n        for i = 1, #label_names do\n          if label_names[i] == 404 then\n            forward_status = label_values[i]\n          end\n        end\n        return forward_status\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_D0D43E": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "duration_ms",
              "playing_time"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "long_view"
            ]
          },
          "export_item_attr": [
            "long_view"
          ],
          "function_for_item": "calculate",
          "import_item_attr": [
            "playing_time",
            "duration_ms"
          ],
          "lua_script": "function calculate()\n        long_view = 0\n        if duration_ms < 14000 then\n          if playing_time > 0.881369*duration_ms + 5184.729 then\n            long_view = 1\n          end\n        elseif duration_ms >= 14000 and duration_ms < 53000 then\n          if playing_time > 0.918007*duration_ms + 3847.164 then\n            long_view = 1\n          end\n        elseif duration_ms >= 53000 and duration_ms < 95000 then\n          if playing_time > 0.732063*duration_ms + 13416.789 then\n            long_view = 1\n          end\n        elseif duration_ms >= 95000 and duration_ms < 170000 then\n          if playing_time > 0.226594*duration_ms + 62817.905 then\n            long_view = 1\n          end\n        else\n          if playing_time > -0.180531*duration_ms + 131062.293 and playing_time > 36000 then\n            long_view = 1\n          end\n        end\n        return long_view\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_D63B22": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "duration_ms",
              "effective_view",
              "long_view",
              "playing_time"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "time_weight"
            ]
          },
          "export_item_attr": [
            "time_weight"
          ],
          "function_for_item": "calculate",
          "import_item_attr": [
            "playing_time",
            "duration_ms",
            "effective_view",
            "long_view"
          ],
          "lua_script": "function calculate()\n        time_weight = 0.0\n        if duration_ms == 0 then\n          time_weight = 0.0\n        else \n          time_weight = math.min(math.max(playing_time / duration_ms, 0.0), 1.0)\n        end\n        time_weight = time_weight + effective_view\n        time_weight = time_weight + long_view\n        return time_weight\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_E0F6BD": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "forward_inside_status"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "forward_inside"
            ]
          },
          "export_item_attr": [
            "forward_inside"
          ],
          "function_for_item": "calculate",
          "import_item_attr": [
            "forward_inside_status"
          ],
          "lua_script": "function calculate()\n        local forward_inside_status = forward_inside_status or 0\n        local success_in = (forward_inside_status >> 2) & 1\n        return success_in\n      end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_with_protobuf_2D75AC": {
          "$metadata": {
            "$input_common_attrs": [
              "user_info"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "click_hetu_one",
              "click_hetu_two",
              "click_photo_ids",
              "collect_hetu_one",
              "collect_hetu_two",
              "collect_photo_ids",
              "comment_hetu_one",
              "comment_hetu_two",
              "comment_photo_ids",
              "download_hetu_one",
              "download_hetu_two",
              "download_photo_ids",
              "follow_hetu_one",
              "follow_hetu_two",
              "follow_photo_ids",
              "forward_hetu_one",
              "forward_hetu_two",
              "forward_photo_ids",
              "like_hetu_one",
              "like_hetu_two",
              "like_photo_ids"
            ],
            "$output_item_attrs": []
          },
          "attrs": [
            {
              "name": "click_photo_ids",
              "path": "user_profile_v1.click_list.photo_id"
            },
            {
              "name": "click_hetu_one",
              "path": "user_profile_v1.click_list.hetu_tag_level_info.hetu_level_one",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.click_list.hetu_tag_level_info.hetu_level_one": 1
              }
            },
            {
              "name": "click_hetu_two",
              "path": "user_profile_v1.click_list.hetu_tag_level_info.hetu_level_two",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.click_list.hetu_tag_level_info.hetu_level_two": 1
              }
            },
            {
              "name": "like_photo_ids",
              "path": "user_profile_v1.like_list.photo_id"
            },
            {
              "name": "like_hetu_one",
              "path": "user_profile_v1.like_list.hetu_tag_level_info.hetu_level_one",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.like_list.hetu_tag_level_info.hetu_level_one": 1
              }
            },
            {
              "name": "like_hetu_two",
              "path": "user_profile_v1.like_list.hetu_tag_level_info.hetu_level_two",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.like_list.hetu_tag_level_info.hetu_level_two": 1
              }
            },
            {
              "name": "follow_photo_ids",
              "path": "user_profile_v1.follow_list.photo_id"
            },
            {
              "name": "follow_hetu_one",
              "path": "user_profile_v1.follow_list.hetu_tag_level_info.hetu_level_one",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.follow_list.hetu_tag_level_info.hetu_level_one": 1
              }
            },
            {
              "name": "follow_hetu_two",
              "path": "user_profile_v1.follow_list.hetu_tag_level_info.hetu_level_two",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.follow_list.hetu_tag_level_info.hetu_level_two": 1
              }
            },
            {
              "name": "forward_photo_ids",
              "path": "user_profile_v1.forward_list.photo_id"
            },
            {
              "name": "forward_hetu_one",
              "path": "user_profile_v1.forward_list.hetu_tag_level_info.hetu_level_one",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.forward_list.hetu_tag_level_info.hetu_level_one": 1
              }
            },
            {
              "name": "forward_hetu_two",
              "path": "user_profile_v1.forward_list.hetu_tag_level_info.hetu_level_two",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.forward_list.hetu_tag_level_info.hetu_level_two": 1
              }
            },
            {
              "name": "comment_photo_ids",
              "path": "user_profile_v1.comment_list.photo_id"
            },
            {
              "name": "comment_hetu_one",
              "path": "user_profile_v1.comment_list.hetu_tag_level_info.hetu_level_one",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.comment_list.hetu_tag_level_info.hetu_level_one": 1
              }
            },
            {
              "name": "comment_hetu_two",
              "path": "user_profile_v1.comment_list.hetu_tag_level_info.hetu_level_two",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.comment_list.hetu_tag_level_info.hetu_level_two": 1
              }
            },
            {
              "name": "collect_photo_ids",
              "path": "user_profile_v1.collect_list.photo_id"
            },
            {
              "name": "collect_hetu_one",
              "path": "user_profile_v1.collect_list.hetu_tag_level_info.hetu_level_one",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.collect_list.hetu_tag_level_info.hetu_level_one": 1
              }
            },
            {
              "name": "collect_hetu_two",
              "path": "user_profile_v1.collect_list.hetu_tag_level_info.hetu_level_two",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.collect_list.hetu_tag_level_info.hetu_level_two": 1
              }
            },
            {
              "name": "download_photo_ids",
              "path": "user_profile_v1.download_video_list.photo_id"
            },
            {
              "name": "download_hetu_one",
              "path": "user_profile_v1.download_video_list.hetu_tag_level_info.hetu_level_one",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.download_video_list.hetu_tag_level_info.hetu_level_one": 1
              }
            },
            {
              "name": "download_hetu_two",
              "path": "user_profile_v1.download_video_list.hetu_tag_level_info.hetu_level_two",
              "repeat_align": true,
              "repeat_limit": {
                "user_profile_v1.download_video_list.hetu_tag_level_info.hetu_level_two": 1
              }
            }
          ],
          "from_extra_var": "user_info",
          "is_common_attr": true,
          "type_name": "CommonRecoProtobufAttrEnricher"
        },
        "enrich_with_protobuf_365A09": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "photo_info"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "audit_b_second_tag",
              "duration_ms",
              "photo_hetu_one",
              "photo_hetu_two"
            ]
          },
          "attrs": [
            "duration_ms",
            "audit_b_second_tag",
            {
              "name": "photo_hetu_one",
              "path": "hetu_tag_level_info.hetu_level_one",
              "repeat_align": true,
              "repeat_limit": {
                "hetu_tag_level_info.hetu_level_one": 1
              }
            },
            {
              "name": "photo_hetu_two",
              "path": "hetu_tag_level_info.hetu_level_two",
              "repeat_align": true,
              "repeat_limit": {
                "hetu_tag_level_info.hetu_level_two": 1
              }
            }
          ],
          "from_extra_var": "photo_info",
          "is_common_attr": false,
          "type_name": "CommonRecoProtobufAttrEnricher"
        },
        "enrich_with_protobuf_6894E4": {
          "$metadata": {
            "$input_common_attrs": [
              "ks_reco_log"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "tab_id",
              "user_info"
            ],
            "$output_item_attrs": []
          },
          "attrs": [
            {
              "name": "user_info",
              "path": "user"
            },
            {
              "name": "tab_id",
              "path": "tab"
            }
          ],
          "from_extra_var": "ks_reco_log",
          "is_common_attr": true,
          "type_name": "CommonRecoProtobufAttrEnricher"
        },
        "enrich_with_protobuf_6B823E": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "reco_photo_info"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "cascade_pctr",
              "cascade_pltr",
              "cascade_plvtr",
              "cascade_psvr",
              "context_info",
              "pcltr",
              "pcmtr",
              "pctr",
              "pdtr",
              "pftr",
              "photo_info",
              "pltr",
              "pwtr",
              "reason"
            ]
          },
          "attrs": [
            {
              "name": "photo_info",
              "path": "photo"
            },
            "reason",
            "context_info",
            "pctr",
            "cascade_pctr",
            "cascade_plvtr",
            "cascade_psvr",
            "cascade_pltr",
            "pltr",
            "pwtr",
            "pftr",
            "pcmtr",
            "pcltr",
            "pdtr"
          ],
          "from_extra_var": "reco_photo_info",
          "is_common_attr": false,
          "type_name": "CommonRecoProtobufAttrEnricher"
        },
        "enrich_with_protobuf_FD0B3B": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "context_info"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "cancel_collect",
              "collect",
              "comment",
              "discard",
              "dislike",
              "down_load",
              "feedback_negative",
              "follow",
              "forward",
              "label_names",
              "label_values",
              "like",
              "playing_time",
              "real_show",
              "unfollow",
              "unlike"
            ]
          },
          "attrs": [
            "real_show",
            "playing_time",
            "like",
            "follow",
            "forward",
            "comment",
            "collect",
            "unfollow",
            "unlike",
            "discard",
            "dislike",
            "cancel_collect",
            "feedback_negative",
            "down_load",
            {
              "name": "label_names",
              "path": "reco_labels.name_value"
            },
            {
              "name": "label_values",
              "path": "reco_labels.int_value"
            }
          ],
          "from_extra_var": "context_info",
          "is_common_attr": false,
          "type_name": "CommonRecoProtobufAttrEnricher"
        },
        "extract_kuiba_parameter_C7DDF3": {
          "$metadata": {
            "$input_common_attrs": [
              "click_hetu_one",
              "click_hetu_two",
              "click_photo_ids",
              "collect_hetu_one",
              "collect_hetu_two",
              "collect_photo_ids",
              "comment_hetu_one",
              "comment_hetu_two",
              "comment_photo_ids",
              "download_hetu_one",
              "download_hetu_two",
              "download_photo_ids",
              "follow_hetu_one",
              "follow_hetu_two",
              "follow_photo_ids",
              "forward_hetu_one",
              "forward_hetu_two",
              "forward_photo_ids",
              "like_hetu_one",
              "like_hetu_two",
              "like_photo_ids"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "kuiba_common_signs",
              "kuiba_common_slots"
            ],
            "$output_item_attrs": []
          },
          "config": {
            "click_hetu_one": {
              "attrs": [
                {
                  "attr": [
                    "click_hetu_one"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 902,
                  "type": 5
                }
              ]
            },
            "click_hetu_two": {
              "attrs": [
                {
                  "attr": [
                    "click_hetu_two"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 903,
                  "type": 5
                }
              ]
            },
            "click_photo_ids": {
              "attrs": [
                {
                  "attr": [
                    "click_photo_ids"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 901,
                  "type": 5
                }
              ]
            },
            "collect_hetu_one": {
              "attrs": [
                {
                  "attr": [
                    "collect_hetu_one"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 917,
                  "type": 5
                }
              ]
            },
            "collect_hetu_two": {
              "attrs": [
                {
                  "attr": [
                    "collect_hetu_two"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 918,
                  "type": 5
                }
              ]
            },
            "collect_photo_ids": {
              "attrs": [
                {
                  "attr": [
                    "collect_photo_ids"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 916,
                  "type": 5
                }
              ]
            },
            "comment_hetu_one": {
              "attrs": [
                {
                  "attr": [
                    "comment_hetu_one"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 914,
                  "type": 5
                }
              ]
            },
            "comment_hetu_two": {
              "attrs": [
                {
                  "attr": [
                    "comment_hetu_two"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 915,
                  "type": 5
                }
              ]
            },
            "comment_photo_ids": {
              "attrs": [
                {
                  "attr": [
                    "comment_photo_ids"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 913,
                  "type": 5
                }
              ]
            },
            "download_hetu_one": {
              "attrs": [
                {
                  "attr": [
                    "download_hetu_one"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 920,
                  "type": 5
                }
              ]
            },
            "download_hetu_two": {
              "attrs": [
                {
                  "attr": [
                    "download_hetu_two"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 921,
                  "type": 5
                }
              ]
            },
            "download_photo_ids": {
              "attrs": [
                {
                  "attr": [
                    "download_photo_ids"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 919,
                  "type": 5
                }
              ]
            },
            "follow_hetu_one": {
              "attrs": [
                {
                  "attr": [
                    "follow_hetu_one"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 908,
                  "type": 5
                }
              ]
            },
            "follow_hetu_two": {
              "attrs": [
                {
                  "attr": [
                    "follow_hetu_two"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 909,
                  "type": 5
                }
              ]
            },
            "follow_photo_ids": {
              "attrs": [
                {
                  "attr": [
                    "follow_photo_ids"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 907,
                  "type": 5
                }
              ]
            },
            "forward_hetu_one": {
              "attrs": [
                {
                  "attr": [
                    "forward_hetu_one"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 911,
                  "type": 5
                }
              ]
            },
            "forward_hetu_two": {
              "attrs": [
                {
                  "attr": [
                    "forward_hetu_two"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 912,
                  "type": 5
                }
              ]
            },
            "forward_photo_ids": {
              "attrs": [
                {
                  "attr": [
                    "forward_photo_ids"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 910,
                  "type": 5
                }
              ]
            },
            "like_hetu_one": {
              "attrs": [
                {
                  "attr": [
                    "like_hetu_one"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 905,
                  "type": 5
                }
              ]
            },
            "like_hetu_two": {
              "attrs": [
                {
                  "attr": [
                    "like_hetu_two"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 906,
                  "type": 5
                }
              ]
            },
            "like_photo_ids": {
              "attrs": [
                {
                  "attr": [
                    "like_photo_ids"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 50,
                    "reversed": false
                  },
                  "key_type": 904,
                  "type": 5
                }
              ]
            }
          },
          "is_common_attr": true,
          "parameters_output": "kuiba_common_signs",
          "slot_as_attr_name": false,
          "slots_output": "kuiba_common_slots",
          "type_name": "KuibaParameterAttrEnricher"
        },
        "extract_kuiba_parameter_D0D5CF": {
          "$metadata": {
            "$input_common_attrs": [
              "follow_status"
            ],
            "$input_item_attrs": [
              "follow_status",
              "pcltr",
              "pcmtr",
              "pdtr",
              "pftr",
              "photo_hetu_one",
              "photo_hetu_two",
              "pltr",
              "pwtr"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "kuiba_item_signs",
              "kuiba_item_slots"
            ]
          },
          "config": {
            "follow_status": {
              "attrs": [
                {
                  "attr": [
                    "follow_status"
                  ],
                  "converter": "id",
                  "key_type": 27,
                  "mio_slot_key_type": 27
                }
              ]
            },
            "pcltr": {
              "attrs": [
                {
                  "attr": [
                    "pcltr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.2,0,1,600,-1",
                  "key_type": 1005
                }
              ]
            },
            "pcmtr": {
              "attrs": [
                {
                  "attr": [
                    "pcmtr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.2,0,1,600,-1",
                  "key_type": 1004
                }
              ]
            },
            "pdtr": {
              "attrs": [
                {
                  "attr": [
                    "pdtr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.2,0,1,600,-1",
                  "key_type": 1006
                }
              ]
            },
            "pftr": {
              "attrs": [
                {
                  "attr": [
                    "pftr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.2,0,1,800,-1",
                  "key_type": 1003
                }
              ]
            },
            "photo_hetu_one": {
              "attrs": [
                {
                  "attr": [
                    "photo_hetu_one"
                  ],
                  "converter": "id",
                  "key_type": 201,
                  "mio_slot_key_type": 201
                }
              ]
            },
            "photo_hetu_two": {
              "attrs": [
                {
                  "attr": [
                    "photo_hetu_two"
                  ],
                  "converter": "id",
                  "key_type": 202,
                  "mio_slot_key_type": 202
                }
              ]
            },
            "pltr": {
              "attrs": [
                {
                  "attr": [
                    "pltr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.2,0,1,400,-1",
                  "key_type": 1001
                }
              ]
            },
            "pwtr": {
              "attrs": [
                {
                  "attr": [
                    "pwtr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.2,0,1,600,-1",
                  "key_type": 1002
                }
              ]
            }
          },
          "is_common_attr": false,
          "parameters_output": "kuiba_item_signs",
          "slot_as_attr_name": false,
          "slots_output": "kuiba_item_slots",
          "type_name": "KuibaParameterAttrEnricher"
        },
        "extract_with_ks_sign_feature_E1AC02": {
          "$metadata": {
            "$input_common_attrs": [
              "tab_id",
              "user_info"
            ],
            "$input_item_attrs": [
              "cascade_pctr",
              "cascade_pltr",
              "cascade_plvtr",
              "cascade_psvr",
              "context_info",
              "pctr",
              "photo_info",
              "pltr",
              "reason"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "common_signs",
              "common_slots"
            ],
            "$output_item_attrs": [
              "item_signs",
              "item_slots"
            ]
          },
          "cascade_pctr_attr": "cascade_pctr",
          "cascade_pltr_attr": "cascade_pltr",
          "cascade_plvtr_attr": "cascade_plvtr",
          "cascade_psvr_attr": "cascade_psvr",
          "common_parameters_output": "common_signs",
          "common_slots_output": "common_slots",
          "context_info_attr": "context_info",
          "feature_list": [
            "ExtractSignAuthorExpCtr",
            "ExtractSignAuthorExpStat",
            "ExtractSignAuthorId",
            "ExtractSignAuthorId3",
            "ExtractSignCascadePctr",
            "ExtractSignCascadePltr",
            "ExtractSignCascadePlvtr",
            "ExtractSignCascadePsvr",
            "ExtractSignCascadeXctr",
            "ExtractSignPhotoAge",
            "ExtractSignPhotoDuration",
            "ExtractSignPhotoDuration0",
            "ExtractSignPhotoHetuClusterId",
            "ExtractSignPhotoHetuFaceid",
            "ExtractSignPhotoHetuTagOne",
            "ExtractSignPhotoHetuTagOne2",
            "ExtractSignPhotoHetuTagTwo",
            "ExtractSignPhotoHetuTagTwo2",
            "ExtractSignPhotoId",
            "ExtractSignPhotoLogClickCount",
            "ExtractSignPhotoLogLikeCount",
            "ExtractSignPhotoShortPlayRateV2",
            "ExtractSignPhotoTag",
            "ExtractSignReason",
            "ExtractSignReqTypePage",
            "ExtractSignTabInfo",
            "ExtractSignUserAllGender",
            "ExtractSignUserApplistTotal",
            "ExtractSignUserDeviceId",
            "ExtractSignUserExpRate",
            "ExtractSignUserId",
            "ExtractSignUserOrDeviceId",
            "ExtractSignWatchTimeExpStat",
            "ExtractSignWatchTimeExpStatOnDuration"
          ],
          "item_parameters_output": "item_signs",
          "item_slots_output": "item_slots",
          "pctr_attr": "pctr",
          "photo_info_attr": "photo_info",
          "pltr_attr": "pltr",
          "reason_attr": "reason",
          "tab_id_attr": "tab_id",
          "type_name": "MioKsSignFeatureEnricher",
          "user_info_attr": "user_info"
        },
        "fetch_message_599FCA": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "ks_reco_log_str"
            ],
            "$output_item_attrs": []
          },
          "begin_time_ms": "2022-08-10 18",
          "group_id": "slide_multi_task_rank_weight_point_wise",
          "kafka_topic": "slide_new_hot_train",
          "output_attr": "ks_reco_log_str",
          "type_name": "OfflineMessageFetchEnricher"
        },
        "get_kconf_params_FE5424": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "sample_rate"
            ],
            "$output_item_attrs": []
          },
          "kconf_configs": [
            {
              "default_value": 0.2,
              "export_common_attr": "sample_rate",
              "json_path": "sample_rate_lag",
              "kconf_key": "cc.knowledgeGraph.slideInteractiveModelTrain"
            }
          ],
          "type_name": "CommonRecoKconfCommonAttrEnricher"
        },
        "parse_protobuf_from_string_2DC63C": {
          "$metadata": {
            "$input_common_attrs": [
              "ks_reco_log_str"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "ks_reco_log"
            ],
            "$output_item_attrs": []
          },
          "class_name": "ks.reco.RecoLog",
          "input_attr": "ks_reco_log_str",
          "output_attr": "ks_reco_log",
          "type_name": "CommonRecoProtobufParseAttrEnricher"
        },
        "perflog_attr_value_06A13E": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "audit_count",
              "interact_label",
              "interact_weight",
              "reset_count"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "check_point": "default.training",
          "item_attrs": [
            "interact_weight",
            "interact_label",
            "reset_count",
            "audit_count"
          ],
          "type_name": "CommonRecoAttrValuePerflogObserver"
        },
        "remove_no_real_show": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "real_show"
            ],
            "$modify_item_tables": [
              ""
            ],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "attr_name": "real_show",
          "compare_to": 0,
          "remove_if": "==",
          "type_name": "CommonRecoAttrFilterArranger"
        },
        "retrieve_from_ks_reco_log_C65331": {
          "$metadata": {
            "$input_common_attrs": [
              "ks_reco_log"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "reco_photo_info"
            ]
          },
          "from_extra_var": "ks_reco_log",
          "save_reco_photo_to": "reco_photo_info",
          "type_name": "OfflineKsRecoLogRetriever"
        },
        "send_to_mio_learner_A14A4A": {
          "$metadata": {
            "$input_common_attrs": [
              "common_signs",
              "common_slots",
              "interact_label",
              "interact_weight",
              "item_signs",
              "item_slots",
              "kuiba_common_signs",
              "kuiba_common_slots",
              "kuiba_item_signs",
              "kuiba_item_slots",
              "pcltr",
              "pcmtr",
              "pdtr",
              "pftr",
              "pltr",
              "pwtr"
            ],
            "$input_item_attrs": [
              "click",
              "common_signs",
              "common_slots",
              "interact_label",
              "interact_weight",
              "item_signs",
              "item_slots",
              "kuiba_common_signs",
              "kuiba_common_slots",
              "kuiba_item_signs",
              "kuiba_item_slots",
              "pcltr",
              "pcmtr",
              "pdtr",
              "pftr",
              "pltr",
              "pwtr"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "attrs": [
            "interact_label",
            "interact_weight",
            "pltr",
            "pwtr",
            "pftr",
            "pcmtr",
            "pcltr",
            "pdtr"
          ],
          "label_attr": "click",
          "signs_attrs": [
            "common_signs",
            "item_signs",
            "kuiba_common_signs",
            "kuiba_item_signs"
          ],
          "slots_attrs": [
            "common_slots",
            "item_slots",
            "kuiba_common_slots",
            "kuiba_item_slots"
          ],
          "type_name": "MioRecordChannelObserver"
        }
      },
      "type_name": "CommonRecoPipeline"
    },
    "pipeline_map": {
      "read_joint_reco_log": {
        "__PARENT": "base_pipeline",
        "pipeline": [
          "get_kconf_params_FE5424",
          "fetch_message_599FCA",
          "parse_protobuf_from_string_2DC63C",
          "enrich_with_protobuf_6894E4",
          "retrieve_from_ks_reco_log_C65331",
          "enrich_with_protobuf_6B823E",
          "enrich_with_protobuf_2D75AC",
          "enrich_with_protobuf_365A09",
          "enrich_with_protobuf_FD0B3B",
          "remove_no_real_show",
          "enrich_attr_by_lua_C3BBCE",
          "enrich_attr_by_lua_E0F6BD",
          "enrich_attr_by_lua_627879",
          "enrich_attr_by_lua_989895",
          "enrich_attr_by_lua_D0D43E",
          "enrich_attr_by_lua_D63B22",
          "enrich_attr_by_lua_80AE48",
          "enrich_attr_by_lua_7EDD6A",
          "enrich_attr_by_lua_280E6D",
          "enrich_attr_by_lua_2FE092",
          "data_sampler_filter",
          "perflog_attr_value_06A13E",
          "extract_with_ks_sign_feature_E1AC02",
          "extract_kuiba_parameter_C7DDF3",
          "extract_kuiba_parameter_D0D5CF"
        ]
      },
      "send_to_mio_learner": {
        "__PARENT": "base_pipeline",
        "pipeline": [
          "send_to_mio_learner_A14A4A"
        ]
      }
    }
  },
  "runner_pipeline_group": {
    "default_name": {
      "core_num_thread_ratio": 0.0,
      "pipeline": [
        "read_joint_reco_log",
        "send_to_mio_learner"
      ],
      "thread_num": -1
    }
  },
  "service_identifier": "mio_offline_runner"
}