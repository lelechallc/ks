{
  "_CONFIG_VERSION": "1c9d67f26c4313185893856910fd1aa7_local",
  "_DRAGONFLY_CREATE_TIME": "2024-04-25 20:56:32",
  "_DRAGONFLY_VERSION": "0.8.0",
  "kess_config": {},
  "pipeline_manager_config": {
    "base_pipeline": {
      "processor": {
        "_branch_controller_A93BFE5B": {
          "$branch_start": "_branch_controller_A93BFE5B",
          "$code_info": "[if] A93BFE5B pipeline.py in <module>(): .if_(\"retrieve_num <= 0\")",
          "$metadata": {
            "$input_common_attrs": [
              "retrieve_num"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "_if_control_attr_1"
            ],
            "$output_item_attrs": []
          },
          "export_common_attr": [
            "_if_control_attr_1"
          ],
          "for_branch_control": true,
          "function_for_common": "evaluate",
          "import_common_attr": [
            "retrieve_num"
          ],
          "lua_script": "function evaluate() if (retrieve_num <= 0) then return false else return true end end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "convert_csv_to_tf_sequence_example_613AC5": {
          "$metadata": {
            "$input_common_attrs": [
              "csv_sample_data"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "tf_sequence_example"
            ],
            "$output_item_attrs": []
          },
          "column_separator": "|",
          "common_attrs": [
            {
              "column_index": 16,
              "column_name": "age_segment",
              "type": "int"
            },
            {
              "column_index": 17,
              "column_name": "gender",
              "type": "int"
            },
            {
              "column_index": 18,
              "column_name": "device_id",
              "type": "string"
            },
            {
              "column_index": 19,
              "column_name": "photo_id",
              "type": "int"
            },
            {
              "column_index": 20,
              "column_name": "photo_author_id",
              "type": "int"
            },
            {
              "column_index": 28,
              "column_name": "user_id",
              "type": "int"
            }
          ],
          "from_extra_var": "csv_sample_data",
          "item_attrs": [
            {
              "column_index": 0,
              "column_name": "comment_id",
              "type": "int"
            },
            {
              "column_index": 1,
              "column_name": "author_id",
              "type": "int"
            },
            {
              "column_index": 2,
              "column_name": "like_cnt",
              "type": "int"
            },
            {
              "column_index": 3,
              "column_name": "reply_cnt",
              "type": "int"
            },
            {
              "column_index": 4,
              "column_name": "dislike_cnt",
              "type": "int"
            },
            {
              "column_index": 5,
              "column_name": "realshow_cnt",
              "type": "int"
            },
            {
              "column_index": 6,
              "column_name": "minute_diff",
              "type": "float"
            },
            {
              "column_index": 7,
              "column_name": "ltr",
              "type": "float"
            },
            {
              "column_index": 8,
              "column_name": "rtr",
              "type": "float"
            },
            {
              "column_index": 9,
              "column_name": "showaction",
              "type": "int"
            },
            {
              "column_index": 10,
              "column_name": "replyaction",
              "type": "int"
            },
            {
              "column_index": 11,
              "column_name": "likeaction",
              "type": "int"
            },
            {
              "column_index": 12,
              "column_name": "expandaction",
              "type": "int"
            },
            {
              "column_index": 13,
              "column_name": "audienceaction",
              "type": "int"
            },
            {
              "column_index": 14,
              "column_name": "reportaction",
              "type": "int"
            },
            {
              "column_index": 15,
              "column_name": "comment_content_segs",
              "type": "string_list"
            },
            {
              "column_index": 21,
              "column_name": "comment_genre",
              "type": "int"
            },
            {
              "column_index": 22,
              "column_name": "risk_insult_tag",
              "type": "int"
            },
            {
              "column_index": 23,
              "column_name": "risk_negative_tag",
              "type": "int"
            },
            {
              "column_index": 24,
              "column_name": "risk_inactive_tag",
              "type": "int"
            },
            {
              "column_index": 25,
              "column_name": "mmu_category_tag",
              "type": "int"
            },
            {
              "column_index": 26,
              "column_name": "mmu_emotion_tag",
              "type": "int"
            },
            {
              "column_index": 27,
              "column_name": "mmu_entity_list",
              "type": "string_list"
            },
            {
              "column_index": 29,
              "column_name": "predict_reply_score",
              "type": "float"
            },
            {
              "column_index": 30,
              "column_name": "quality_v2_score",
              "type": "float"
            },
            {
              "column_index": 31,
              "column_name": "predict_like_score",
              "type": "float"
            }
          ],
          "item_separator": ",",
          "list_separator": " ",
          "save_result_to": "tf_sequence_example",
          "type_name": "OfflineCsvToTfSequenceExampleEnricher"
        },
        "count_reco_result_667B8B": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "retrieve_num"
            ],
            "$output_item_attrs": []
          },
          "save_result_size_to_common_attr": "retrieve_num",
          "type_name": "CommonRecoCountRecoResultEnricher"
        },
        "count_reco_result_7BD7E7": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "send_sample_cnt"
            ],
            "$output_item_attrs": []
          },
          "save_result_size_to_common_attr": "send_sample_cnt",
          "type_name": "CommonRecoCountRecoResultEnricher"
        },
        "enrich_attr_by_lua_0C575D": {
          "$metadata": {
            "$input_common_attrs": [
              "device_id",
              "user_id"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "user_hash"
            ],
            "$output_item_attrs": []
          },
          "export_common_attr": [
            "user_hash"
          ],
          "function_for_common": "get_hash",
          "import_common_attr": [
            "user_id",
            "device_id"
          ],
          "lua_script": "function get_hash()\n                    if device_id == nil or device_id == \"\" then\n                        return tonumber(user_id or '0')\n                    end\n                    return util.CityHash64(device_id)\n                end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_340738": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "expandaction",
              "likeaction",
              "replyaction"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "expandaction_v",
              "likeaction_v",
              "replyaction_v"
            ]
          },
          "export_item_attr": [
            "expandaction_v",
            "likeaction_v",
            "replyaction_v"
          ],
          "function_for_item": "trans",
          "import_item_attr": [
            "expandaction",
            "likeaction",
            "replyaction"
          ],
          "lua_script": "function trans() \n                    return expandaction * 1.0, likeaction * 1.0, replyaction * 1.0\n                end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_3F9CFD": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "realshow_cnt"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "comment_vv_tag"
            ]
          },
          "export_item_attr": [
            "comment_vv_tag"
          ],
          "function_for_item": "get_comment_vv_tag",
          "import_item_attr": [
            "realshow_cnt"
          ],
          "lua_script": "function get_comment_vv_tag()\n                local comment_vv_tag = 0.0\n                if realshow_cnt < 80 then\n                    comment_vv_tag = 1.0\n                elseif realshow_cnt < 200 then\n                    comment_vv_tag = 2.0\n                elseif realshow_cnt < 500 then\n                    comment_vv_tag = 3.0\n                elseif realshow_cnt < 1000 then\n                    comment_vv_tag = 4.0\n                elseif realshow_cnt < 2000 then\n                    comment_vv_tag = 5.0\n                else\n                    comment_vv_tag = 6.0\n                end\n                return comment_vv_tag\n            end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_69260D": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "like_cnt",
              "ltr",
              "predict_like_score",
              "predict_reply_score",
              "quality_v2_score",
              "reply_cnt",
              "rtr"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "fre_grouped_like_cnt",
              "fre_grouped_ltr",
              "fre_grouped_predict_like_score",
              "fre_grouped_predict_reply_score",
              "fre_grouped_quality_v2_score",
              "fre_grouped_reply_cnt",
              "fre_grouped_rtr"
            ]
          },
          "export_item_attr": [
            "fre_grouped_ltr",
            "fre_grouped_rtr",
            "fre_grouped_like_cnt",
            "fre_grouped_reply_cnt",
            "fre_grouped_predict_reply_score",
            "fre_grouped_quality_v2_score",
            "fre_grouped_predict_like_score"
          ],
          "function_for_item": "fre_group",
          "import_item_attr": [
            "ltr",
            "rtr",
            "like_cnt",
            "reply_cnt",
            "predict_reply_score",
            "quality_v2_score",
            "predict_like_score"
          ],
          "lua_script": "function bisect_left(a, x, left, right)\n    lo = left or 1\n    hi = right or nil\n\n    while lo < hi do\n        mid = math.floor((lo+hi) / 2)\n        if a[mid] < x then\n            lo = mid+1\n        else\n            hi = mid\n        end\n    end\n    return lo\nend\n\nfunction fre_group()\n\n    local fre_grouped_ltr = 0\n    local fre_grouped_rtr = 0\n    local fre_grouped_like_cnt = 0\n    local fre_grouped_reply_cnt = 0\n    local fre_grouped_predict_reply_score = 0\n    local fre_grouped_quality_v2_score = 0\n    local fre_grouped_predict_like_score = 0\n\n    local ltr = ltr or 0.0\n    local rtr = rtr or 0.0\n    local like_cnt = like_cnt or 0.0\n    local reply_cnt = reply_cnt or 0.0\n    local predict_reply_score = predict_reply_score or 0.0\n    local quality_v2_score = quality_v2_score or 0.0\n    local predict_like_score = predict_like_score or 0.0\n\n    ltr_points = {\n        2.1845646411904144E-4,3.4042115727881593E-4,4.409079632070878E-4,5.33005408821549E-4,6.202775854537608E-4,7.05270857724024E-4,7.883914536086172E-4,8.709181656753118E-4,9.523764486177602E-4,0.001033975823991455,0.0011165653889957747,0.0011964067788800062,0.0012821502925268638,0.0013630295238946362,0.0014484817785925465,0.0015334560249162551,0.0016188866338346217,0.001706841030130873,0.0017973297367456322,0.0018902711929497029,0.0019830758527670804,0.0020767002794252628,0.002168913453303569,0.0022655250716703107,0.0023642354386907726,0.0024666307137858803,0.0025697253169349402,0.002678962759062544,0.002783585425039865,0.002897205022420473,0.0030117721201916607,0.003124661976605568,0.003246060739538912,0.003365206562210891,0.0034916502438536896,0.0036176316339600746,0.0037500580340587035,0.003880578413260401,0.004017173305560978,0.00415627713743732,0.004296806766285983,0.004443516192225499,0.004594865751733459,0.0047497710862378,0.00490695156104665,0.005072928053800322,0.005239824558097408,0.005415729302101763,0.005594988600239772,0.005772818586877763,0.005958914813089849,0.006149192642401011,0.00634881547980231,0.006555925630108949,0.006767525039989489,0.0069901200415120514,0.007218673364876081,0.007457939995780592,0.007705735707760515,0.007962490022247613,0.008227249959991965,0.008506317724119571,0.008786036345743568,0.00908099154532184,0.00938019771334198,0.009703200272950605,0.010036274458469404,0.010393294546275631,0.010772355581619875,0.011166227652128378,0.011574849009776851,0.01201328604050062,0.012473880815309186,0.01297086405342222,0.013485325056803658,0.014030159722909975,0.014600012497462105,0.015198149247394372,0.015831200492280866,0.01652290452423412,0.017277529964667006,0.018078527458726772,0.018938896673504065,0.019857406833121583,0.020872516290207994,0.021985472767553804,0.0232396146054282,0.02458428130156185,0.026162173388738344,0.027925864291896224,0.029921750421313807,0.03224892699502004,0.03492807807314789,0.03827172242423766,0.04223322163045511,0.04731169998424691,0.054623472428921314,0.06561218448775102,0.08077594155646584, 0.08946012178861691, 0.1538437426233121\n    }\n    -- len(ltr_points)=101\n    fre_grouped_ltr = bisect_left(ltr_points, ltr, 1, 102)\n\n    rtr_points = {\n        3.83088265202898E-7,1.071759603184615E-5, 2.377290530098842E-5, 3.213672891920253E-5, 4.0235165604970665E-5, 5.4496116745277E-5, 6.128890084165351E-5, 7.276617890621005E-5,8.159874846472558E-5,9.130186792906655E-5,1.0100498739340755E-4,1.1070810685774848E-4,1.2041122632208944E-4,1.301143457864304E-4,1.3981746525077137E-4,1.4952058471511234E-4,1.5922370417945333E-4,1.6892682364379424E-4,1.7862994310813523E-4,1.883330625724762E-4,1.9803618203681717E-4,2.077393015011581E-4,2.174424209654991E-4,2.2714554042984003E-4,2.3701496627753598E-4,2.5286203297425345E-4,2.6870909967097086E-4,2.8455616636768833E-4,3.0040323306440575E-4,3.162502997611232E-4,3.320973664578407E-4,3.479444331545581E-4,3.637914998512756E-4,3.7963856654799305E-4,3.9548563324471047E-4,4.144263213607371E-4,4.359904516002747E-4,4.5755458183981243E-4,4.7911871207934997E-4,5.006828423188872E-4,5.222469725584249E-4,5.438111027979625E-4,5.653752330375E-4,5.927978641295654E-4,6.205485772993593E-4,6.482992904691534E-4,6.760500036389473E-4,7.038007168087414E-4,7.315514299785354E-4,7.661060188863676E-4,8.097717520825411E-4,8.534374852787136E-4,8.971032184748866E-4,9.408885908897823E-4,9.961038913139E-4,0.0010513191917380176,0.0011065344921621354,0.0011649470858139824,0.0012242624208567763,0.0012835777558995705,0.001358668346029079,0.0014445242390242162,0.0015338556190820547,0.001644272351703177,0.00176188069021833,0.001892313669425812,0.002034950091825947,0.0021881577098983086,0.002368372054157179,0.002557734213286212,0.0027984915669117556,0.0030703240405317326,0.0034358966314723656,0.0038262924494038356,0.004367791260060398,0.005030225056624186,0.005891031457902632,0.007092517989028498,0.008809323882441747,0.011508006437194001, 0.016114590965962326, 0.017076861994483845, 0.02897970847969993, 0.03252777580145451\n    }\n    -- len(rtr_points)=84\n    fre_grouped_rtr = bisect_left(rtr_points, rtr, 1, 85)\n\n\n    like_cnt_points = {\n        1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.39588706411376,10.923688626605216,12.45149018909667,13.979291751588125,15.50709331407958,17.03489487657103,18.833422228776868,21.433475034462198,24.033527840147528,26.633580645832865,29.23363345151818,31.979663281584063,35.38553283697884,38.79140239237362,42.19727194776839,45.72256502016021,49.924028146540905,54.12549127292165,56.91067544759991,59.682695703902574,63.28665763506031,66.89061956621804,70.49458149737578,74.61360802982156,79.02109793991528,83.428587850009,88.05231366284347,93.08972181816023,98.12712997347697,103.48302271544782,109.12444452120332,114.7658663269588,121.03115185828155,127.32481947406585,134.17043416178498,141.57211777900898,149.22611116334403,157.36114994330399,165.72593344913244,174.4289342666044,183.70700391179145,193.36819400557812,203.8965467503655,214.83950017514414,226.3065489426826,238.46386828108947,251.25179946806776,264.8607351607108,278.81860806557614,292.9945962055721,308.3784632007275,324.9041247074955,342.29304175565363,360.46426476499016,379.2694309501929,398.55341775970754,418.57805571837,440.9201258357187,463.8000245847362,488.08279916377273,513.4528201880654,539.5732828651162,567.475418290225,597.6710380618977,629.4254994580868,662.289830490201,697.224115863307,733.7719662742008,772.7126737378231,815.6267959188807,859.3161635054138,903.9563796011236,954.9962790252555,1005.6266182055454,1061.7200349392253,1121.189193947647,1183.504839765828,1251.4592885258062,1323.3552976836374,1400.2095057279867,1482.7421652861356,1569.2794766957031,1659.0416090379813,1758.9838413441298,1869.7249986527827,1987.6168513567986,2112.4527356685817,2247.3280485400346,2388.3058534303564,2542.807285806882,2709.275802728226,2901.324147548008,3108.191763833244,3329.076767077683,3581.5629491313516,3847.511727618895,4149.015067352284,4498.014427457668,4885.175378467767,5309.500420807305,5813.28704882154,6382.441444872856,7050.523029635292,7814.733066333693,8651.501745893918,9667.773591222278,10970.613080152729,12932.447122773794,15564.69964629787,19204.800007269416,24449.3325329694,31909.58498547581,46429.19335555914\n    }\n    -- len(like_cnt_points) = 121\n    fre_grouped_like_cnt = bisect_left(like_cnt_points, like_cnt, 1, 122)\n\n\n    reply_cnt_points = {\n        1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 11.0,12.1,13.0,14.0,15.000000000000004,17.000000000000004,18.329889493094324,19.118319260240632,20.9,21.504269006712143,22.999999999999993,23.42973196437324,24.0,25.00000000000001,26.000000000000004,27.000000000000007,28.16479352188864,29.000000000000004,30.0,31.1,32.9,33.467341953860846,34.072395802338434,35.00000000000001,36.0,37.00000000000001,38.00000000000001,39.908788309025326,40.99999999999999,42.0,43.000000000000014,44.00000000000001,45.9339208128019,46.725243261204255,48.00000000000001,49.00000000000001,50.589120250081024,52.00000000000001,53.42109682314242,55.0,56.89377002437496,58.40582822387624,60.000000000000014,62.0,63.53483064679416,65.68296793417721,68.0,70.00000000000001,72.00000000000001,75.0,77.0,79.6678044938787,82.99999999999997,85.48325214819768,88.15629769262719,92.0,95.00000000000001,98.16058632111395,102.00000000000001,105.99999999999997,109.4457190368362,113.98233883738033,118.0,122.97817587649263,127.99999999999999,132.3776282431069,138.38416395018373,145.0,151.00000000000003,158.64150649152475,166.4874536409164,175.00000000000003,184.53709784966907,194.15599897899372,204.00000000000003,215.00000000000006,227.86371036220288,241.07789938143029,255.17818029055317,271.39932109808666,289.00000000000006,309.00000000000006,333.0,358.00000000000006,387.32905512512286,421.0000000000001,462.0,508.28156993233785,564.2475419197829,645.0000000000001,736.0000000000002,855.7355281582923,952.0000000000002,980.0000000000002,989.0000000000002,994.1570208195204\n    }\n    -- len(reply_cnt_points) = 105\n    fre_grouped_reply_cnt = bisect_left(reply_cnt_points, reply_cnt, 1, 106)\n\n    mmu_predict_reply_points = {\n        0.019775390625,0.020996093749999997,0.02197265625,0.02294921874999999,0.02368164062500001,0.02478027343750001,0.025512695312500007,0.02636718750000001,0.027221679687499993,0.02795410156249999,0.028442382812500003,0.029296874999999983,0.029785156250000007,0.030273437500000014,0.03112792968749999,0.03171049792521586,0.03198242187499999,0.03247070312500001,0.033203125000000014,0.0341796875,0.034658820023650665,0.03515624999999997,0.03515625,0.035644531250000014,0.03686523437499997,0.03735351562499999,0.03784179687499998,0.038574218749999986,0.03906249999999998,0.03955078125,0.040283203124999986,0.04077148437499999,0.041503906249999986,0.04199218749999998,0.04272460937499998,0.04345703124999997,0.04394531249999999,0.04467773437499997,0.045410156249999986,0.04614257812499996,0.04614257812500003,0.04663085937500002,0.04736328125000005,0.048828124999999965,0.04956054687499997,0.04956054687500005,0.05029296875000003,0.05102539062500002,0.0517578125,0.052734375,0.05346679687500002,0.05419921875,0.054931640625,0.05590820312499998,0.056640625,0.057373046874999986,0.058349609374999986,0.059326171874999986,0.06005859375,0.06103515624999999,0.06176757812500002,0.06298828125,0.06347656249999999,0.06445312499999999,0.06542968750000003,0.06640625000000001,0.06738281250000007,0.06933593749999997,0.07080078124999996,0.07177734375000006,0.07275390625,0.07373046875,0.07470703125000003,0.07714843749999994,0.078125,0.07910156250000007,0.08154296874999999,0.08251953125000007,0.08398437500000006,0.08642578124999993,0.08740234375,0.08886718750000004,0.09123681735033191,0.09277343749999999,0.09521484374999997,0.09814453124999996,0.09960937499999999,0.10253906249999996,0.10498046874999989,0.10839843749999994,0.11132812499999997,0.11572265624999993,0.12011718749999996,0.12402343750000004,0.13085937499999997,0.13964843749999994,0.1484375,0.16210937500000006,0.18457031250000003\n    }\n    -- len(mmu_predict_reply_points) = 99\n    fre_grouped_predict_reply_score = bisect_left(mmu_predict_reply_points, predict_reply_score, 1, 100)\n\n    mmu_quality_v2_points = {\n        0.03978304156211389,0.04422331915682686,0.04826752359849389,0.051628150032779874,0.053594134957566555,0.05615895748232803,0.05815246854809238,0.060378186973739256,0.062056574229191565,0.06419599872001741,0.06586546460636505,0.06783081943813231,0.06957250692553976,0.07130237000825912,0.07295183526637354,0.07467886335384004,0.07631673516925619,0.07790073054248281,0.07982027262911803,0.08095387698518962,0.08263504462754624,0.08424753442683139,0.08561375010632549,0.08713021286800562,0.08873092208476924,0.09050955496118494,0.09210944188706079,0.09367176548352127,0.09525673228213655,0.0967121896844958,0.09822862748488083,0.09992876590348834,0.10125447864824026,0.1026740602546342,0.10415538827729859,0.10585599218914643,0.10748182096853813,0.1092022295678287,0.11106148934697042,0.11274074465264214,0.11426202417831968,0.11619989572584062,0.11781128590239384,0.11951641554709605,0.1214683763931964,0.1232892065038568,0.12549449716385147,0.12758780146290577,0.1298177819434125,0.13157890886811863,0.13382782440959193,0.13602679709787524,0.13851029865181777,0.14087885790930993,0.14306719453892738,0.14567949042871006,0.14774184564189344,0.1502073999626811,0.15270237284013832,0.15546439226447073,0.15775105999465835,0.16024157468936817,0.16334566333669953,0.1667697487733298,0.17035358564738334,0.17350841661403832,0.17682124813877223,0.1801482044143611,0.18380945641125018,0.1874634245996509,0.19098342578920643,0.19468923482622863,0.1985974266233309,0.20291621089642597,0.20787383462528156,0.2132065005727633,0.2179834062872023,0.22351676945690985,0.22948527059966775,0.23621140175391664,0.24217978212763308,0.24927438640826152,0.2565389246263794,0.26427640886136633,0.271679244932186,0.2810227867053544,0.29088497804431546,0.30195308034240076,0.31432957531995653,0.32695306763911963,0.3420306702813107,0.3580314200895649,0.3759953923506414,0.39507115033115225,0.4162486447407249,0.43882242133454524,0.46423175643403525,0.5023306283757816,0.5553181899394263\n    }\n    -- len(mmu_quality_v2_points) = 99\n    fre_grouped_quality_v2_score = bisect_left(mmu_quality_v2_points, quality_v2_score, 1, 100)\n\n    mmu_predict_like_points = {\n        0.11572265625000006,0.13403320312499994,0.14648437500000008,0.158203125,0.16479492187500008,0.17504882812500003,0.18310546874999997,0.19042968749999997,0.19628906250000008,0.20507812500000003,0.21240234374999994,0.2182617187500001,0.22412109375000008,0.2314453125,0.23730468749999997,0.24462890625,0.2510056756786745,0.2554712538034123,0.2622070312499999,0.2666687390019064,0.27392578125,0.27832031249999994,0.2856445312499999,0.2900390625,0.2944335937500001,0.3032226562499999,0.3076171875000002,0.31494140624999983,0.32080078125,0.3251953125,0.33398437499999983,0.3383789062499999,0.3427734375,0.3471679687500001,0.3530273437500001,0.3603515625000001,0.36474609375000017,0.37207031249999983,0.3779296875,0.3867187499999997,0.38964843750000006,0.3955078125000006,0.4042968750000001,0.4101562500000001,0.4189453124999999,0.42480468750000006,0.4306640625,0.43945312499999983,0.44531250000000017,0.45410156249999983,0.45996093750000033,0.46874999999999983,0.4775390625000001,0.4863281249999998,0.4980468749999998,0.5039062500000001,0.5126953125,0.5185546874999999,0.5273437500000002,0.5361328124999998,0.5478515624999998,0.5566406250000001,0.5683593750000001,0.580078125,0.5917968750000004,0.6064453124999997,0.6181640625,0.6269531250000003,0.6386718750000002,0.6549115200365407,0.6679687500000001,0.6796875000000002,0.6972656249999996,0.7148437499999997,0.7294921874999997,0.7470703124999997,0.7675781249999997,0.7876046690770576,0.8085937499999997,0.8320312499999996,0.8496093750000003,0.8730468750000003,0.9023437500000003,0.9374999999999994,0.9609375,0.9902343750000004,1.025390625,1.06640625,1.1132812499999998,1.1542968750000007,1.2070312500000004,1.2714843749999991,1.3359375,1.4062499999999996,1.4824218749999996,1.5585937500000002,1.6523437500000007,1.7893688712580609,1.9804687499999993\n    }\n    -- len(mmu_predict_reply_points) = 99\n    fre_grouped_predict_like_score = bisect_left(mmu_predict_like_points, predict_like_score, 1, 100)\n\n\n\n    dislike_cnt_points = {\n        0.01758761507799528,0.08614958857376788,0.15471156206954048,0.2232735355653131,0.2918355090610857,0.3603974825568583,0.4289594560526309,0.4975214295484035,0.5660834030441761,0.6346453765399487,0.7032073500357213,0.771769323531494,0.8403312970272665,0.9088932705230391,0.9774552440188117,1.0692993101591428,1.1865023557716174,1.303705401384092,1.4209084469965667,1.5381114926090425,1.655314538221517,1.7725175838339897,1.8897206294464655,2.0009161503299,2.621624085867014,2.9999999999999996,3.0,3.0,3.0,3.029248380595205,3.2639093994800215,3.4985704183648383,3.733231437249657,3.9678924561344693,4.999999999999999,5.000000000000001,5.000000000000002,5.253244743399165,5.774142626867917,6.000000000000002,7.000000000000001,7.000000000000002,7.29641759850428,7.8379037057145995,9.000000000000002,9.11021736746548,9.994543360820963,11.000000000000002,12.000000000000002,13.000000000000002,13.999999999999998,15.000000000000004,16.663159553425615,18.522319470395225,20.205727814834702,23.000000000000004,25.999999999999996,30.000000000000004,34.99999999999999,41.0,49.000000000000014,62.00000000000001,82.82511935167828,134.00000000000006\n    }\n    realshow_cnt_points = {\n        220.36184771070734,220.36184771070734,220.36184771070734,340.4392899404711,500.1002334461558,666.9725280695912,836.6413287431573,1035.0452159328618,1246.2137467354553,1486.818888036627,1737.2594852050838,2023.1814509506332,2326.8197026960743,2649.1163962413466,2981.28454310568,3333.4841153207167,3703.801549064096,4107.169769779525,4515.12789238668,4918.6528673983885,5375.737677430753,5895.941957551395,6401.1175331735985,6917.670884755089,7454.2845267468465,8068.459255756222,8711.63679672574,9308.027978415392,9976.406303581001,10678.414502617668,11442.594233474096,12247.461763810474,13058.65037223609,13907.705166803742,14818.757341258251,15778.491219811536,16728.429943647217,17760.871616183056,18866.676781835766,19968.132998962214,21199.654016772423,22373.45689868443,23740.096304097544,25152.78903513615,26560.371382123656,28070.110836695185,29680.05844564546,31348.054246990676,33209.73675034576,35103.01716129356,37124.58489795858,39251.37007681934,41351.58270350383,43731.414726353294,46210.47335633032,48844.01172324023,51639.492565903536,54406.556683500545,57493.54311224857,60692.143653176456,64244.06864319689,67833.33422157988,71747.73185778035,75887.84443444687,80366.06719700087,85167.14420353767,90090.08904641686,95279.61375520073,101070.17978891253,107072.02274474147,113576.38506050862,120529.47126050825,127933.26942061092,135707.02513997332,144336.01992245932,153698.2929455752,163469.79449866433,174201.5275078736,186425.99717742784,199305.502989905,214078.28949072774,229532.79158876528,246639.83879215945,266295.60445103893,287171.64921676647,312000.85438167624,339089.6229098774,370060.0898150819,407547.5985710683,449375.3123327229,494469.8139723469,552770.9506433065,624225.4409086908,718653.8526686138,830793.733223971,981496.6132310394,1195610.5462726348,1540998.697738664,2230372.5057262373\n    }\n    minutes_diff_points = {\n        72.68201691854836,92.38886694472096,110.79449192937498,130.51059316255632,152.70695043459673,179.2941940176135,216.5095147704215,280.7980328981697,370.91586387614035,449.2423153072617,502.8792822654906,542.1343253031299,573.6249892227684,600.2779577136797,624.2524558781092,646.9052453254329,668.8062131847915,689.8353230185506,710.6651284102136,731.7927887001264,753.182656222913,774.9803775126347,797.0650281480913,819.756847781942,842.797354263891,866.5131259876439,890.7967617032585,915.6996146802527,941.7024403024313,970.2792297426787,1002.3759675044798,1040.2548302587736,1086.0425405892136,1139.392570648978,1196.2478690224286,1251.4344878085592,1305.2507850108323,1363.8917325488164,1434.465245542584,1520.9050317920562,1655.2533225272878,2001.3761140755112,2113.516456531448,2192.897040628869,2267.1447104453387,2340.656410333535,2423.6140734249534,2553.5462731097946,2721.7515517515353,2941.5986823103526,3447.8482829003096,3622.5567638943444,3754.6821187477117,3927.4119476643677,4193.9586313768805,4738.91518286142,5074.965670389478,5243.831191438668,5564.729950696131,6227.7396535911885,6551.203950133545,6785.944082509136,7318.348395049304,7987.364427294451,8318.040194853744,9217.898187803345,9555.981177195292,9899.584334632797,10078.86925934472,10078.905734476803,10078.942209608886,10078.978684740969,10079.015159873054,10079.051635005137,10079.08811013722,10079.124585269303,10079.161060401386,10079.197535533469,10079.234010665552,10079.270485797635,10079.30696092972,10079.343436061803,10079.379911193886,10079.41638632597,10079.452861458052,10079.489336590135,10079.525811722218,10079.562286854301,10079.598761986386,10079.63523711847,10079.671712250552,10079.708187382636,10079.744662514719,10079.781137646802,10079.817612778885,10079.854087910968,10079.890563043053,10079.927038175136,10079.963513307219\n    }\n\n\n    return fre_grouped_ltr, fre_grouped_rtr, fre_grouped_like_cnt, fre_grouped_reply_cnt, fre_grouped_predict_reply_score, fre_grouped_quality_v2_score, fre_grouped_predict_like_score\nend",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_B69D41": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "like_cnt",
              "reply_cnt"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "like_reply_tr"
            ]
          },
          "export_item_attr": [
            "like_reply_tr"
          ],
          "function_for_item": "cal_like_reply_tr",
          "import_item_attr": [
            "like_cnt",
            "reply_cnt"
          ],
          "lua_script": "function cal_like_reply_tr()\n                return like_cnt * 1.0 / (reply_cnt + 1.0)\n            end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_D632EA": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "audienceaction",
              "expandaction",
              "likeaction",
              "replyaction",
              "reportaction",
              "showaction"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "sample_weight"
            ]
          },
          "export_item_attr": [
            "sample_weight"
          ],
          "function_for_item": "cal_sample_weight",
          "import_item_attr": [
            "showaction",
            "expandaction",
            "replyaction",
            "likeaction",
            "audienceaction",
            "reportaction"
          ],
          "lua_script": "function cal_sample_weight()\n                    local weight = showaction * 1.0\n                    if (expandaction or 0) > 0 then\n                        weight = weight + 3.0\n                    end\n                    if (replyaction or 0) > 0 then\n                        weight = weight + 5.0\n                    end\n                    if (likeaction or 0) > 0 then\n                        weight = weight + 3.0\n                    end\n                    if (audienceaction or 0) > 0 then\n                        weight = weight + 3.0\n                    end\n                    if (reportaction or 0) > 0 then\n                        weight = weight + 8.0\n                    end\n                    return weight\n                end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "enrich_attr_by_lua_FB76C9": {
          "$metadata": {
            "$input_common_attrs": [
              "age_segment",
              "gender",
              "photo_id"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "photo_hash"
            ],
            "$output_item_attrs": []
          },
          "export_common_attr": [
            "photo_hash"
          ],
          "function_for_common": "get_photo_hash",
          "import_common_attr": [
            "photo_id",
            "age_segment",
            "gender"
          ],
          "lua_script": "function get_photo_hash()\n                    local photo_hash_str = tostring(photo_id) .. tostring(age_segment) .. tostring(gender)\n                    return util.CityHash64(photo_hash_str)\n                end",
          "type_name": "CommonRecoLuaAttrEnricher"
        },
        "extract_kuiba_parameter_67B29A": {
          "$metadata": {
            "$input_common_attrs": [
              "age_segment",
              "device_id",
              "gender",
              "photo_author_id",
              "photo_id",
              "user_id"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "comment_common_signs",
              "comment_common_slots"
            ],
            "$output_item_attrs": []
          },
          "config": {
            "age_segment": {
              "attrs": [
                {
                  "attr": [
                    "age_segment"
                  ],
                  "converter": "id",
                  "key_type": 102,
                  "mio_slot_key_type": 102
                }
              ]
            },
            "device_id": {
              "attrs": [
                {
                  "attr": [
                    "device_id"
                  ],
                  "converter": "id",
                  "key_type": 106,
                  "mio_slot_key_type": 106
                }
              ]
            },
            "gender": {
              "attrs": [
                {
                  "attr": [
                    "gender"
                  ],
                  "converter": "id",
                  "key_type": 101,
                  "mio_slot_key_type": 101
                }
              ]
            },
            "photo_author_id": {
              "attrs": [
                {
                  "attr": [
                    "photo_author_id"
                  ],
                  "converter": "id",
                  "key_type": 202,
                  "mio_slot_key_type": 104
                }
              ]
            },
            "photo_id": {
              "attrs": [
                {
                  "attr": [
                    "photo_id"
                  ],
                  "converter": "id",
                  "key_type": 103,
                  "mio_slot_key_type": 103
                }
              ]
            },
            "user_id": {
              "attrs": [
                {
                  "attr": [
                    "user_id"
                  ],
                  "converter": "id",
                  "key_type": 202,
                  "mio_slot_key_type": 105
                }
              ]
            }
          },
          "is_common_attr": true,
          "parameters_output": "comment_common_signs",
          "slots_output": "comment_common_slots",
          "type_name": "KuibaParameterAttrEnricher"
        },
        "extract_kuiba_parameter_9313AE": {
          "$metadata": {
            "$input_common_attrs": [
              "author_id",
              "comment_content_segs",
              "comment_genre",
              "comment_id",
              "dislike_cnt",
              "like_cnt",
              "ltr",
              "ltr_copy",
              "minute_diff",
              "mmu_category_tag",
              "mmu_emotion_tag",
              "mmu_entity_list",
              "realshow_cnt",
              "reply_cnt",
              "risk_inactive_tag",
              "risk_insult_tag",
              "risk_negative_tag",
              "rtr",
              "rtr_copy"
            ],
            "$input_item_attrs": [
              "author_id",
              "comment_content_segs",
              "comment_genre",
              "comment_id",
              "dislike_cnt",
              "field_emb",
              "fre_grouped_predict_like_score",
              "fre_grouped_predict_reply_score",
              "fre_grouped_quality_v2_score",
              "like_cnt",
              "like_reply_tr",
              "ltr",
              "ltr_copy",
              "minute_diff",
              "mmu_category_tag",
              "mmu_emotion_tag",
              "mmu_entity_list",
              "realshow_cnt",
              "reply_cnt",
              "risk_inactive_tag",
              "risk_insult_tag",
              "risk_negative_tag",
              "rtr",
              "rtr_copy",
              "showaction"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "comment_item_signs",
              "comment_item_slots"
            ]
          },
          "config": {
            "author_id": {
              "attrs": [
                {
                  "attr": [
                    "author_id"
                  ],
                  "converter": "id",
                  "key_type": 202,
                  "mio_slot_key_type": 202
                }
              ]
            },
            "comment_content_segs": {
              "attrs": [
                {
                  "attr": [
                    "comment_content_segs"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 16,
                    "reversed": false
                  },
                  "key_type": 212,
                  "mio_slot_key_type": 212,
                  "type": 5
                }
              ]
            },
            "comment_genre": {
              "attrs": [
                {
                  "attr": [
                    "comment_genre"
                  ],
                  "converter": "id",
                  "key_type": 213,
                  "mio_slot_key_type": 213
                }
              ]
            },
            "comment_id": {
              "attrs": [
                {
                  "attr": [
                    "comment_id"
                  ],
                  "converter": "id",
                  "key_type": 201,
                  "mio_slot_key_type": 201
                }
              ]
            },
            "dislike_cnt": {
              "attrs": [
                {
                  "attr": [
                    "dislike_cnt"
                  ],
                  "converter": "discrete",
                  "converter_args": "3,0,100000,1,0",
                  "key_type": 209,
                  "mio_slot_key_type": 209
                }
              ]
            },
            "field_emb": {
              "attrs": [
                {
                  "attr": [
                    "field_emb"
                  ],
                  "converter": "id",
                  "key_type": 404,
                  "mio_slot_key_type": 404
                }
              ]
            },
            "fre_grouped_predict_like_score": {
              "attrs": [
                {
                  "attr": [
                    "fre_grouped_predict_like_score"
                  ],
                  "converter": "id",
                  "key_type": 409,
                  "mio_slot_key_type": 409
                }
              ]
            },
            "fre_grouped_predict_reply_score": {
              "attrs": [
                {
                  "attr": [
                    "fre_grouped_predict_reply_score"
                  ],
                  "converter": "id",
                  "key_type": 407,
                  "mio_slot_key_type": 407
                }
              ]
            },
            "fre_grouped_quality_v2_score": {
              "attrs": [
                {
                  "attr": [
                    "fre_grouped_quality_v2_score"
                  ],
                  "converter": "id",
                  "key_type": 408,
                  "mio_slot_key_type": 408
                }
              ]
            },
            "like_cnt": {
              "attrs": [
                {
                  "attr": [
                    "like_cnt"
                  ],
                  "converter": "discrete",
                  "converter_args": "5,0,100000,1,0",
                  "key_type": 203,
                  "mio_slot_key_type": 203
                }
              ]
            },
            "like_reply_tr": {
              "attrs": [
                {
                  "attr": [
                    "like_reply_tr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.001,0,10000,1,-1",
                  "key_type": 406,
                  "mio_slot_key_type": 406
                }
              ]
            },
            "ltr": {
              "attrs": [
                {
                  "attr": [
                    "ltr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.001,0,1000,1,-1",
                  "key_type": 206,
                  "mio_slot_key_type": 206
                }
              ]
            },
            "ltr_copy": {
              "attrs": [
                {
                  "attr": [
                    "ltr_copy"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.001,0,1000,137,0",
                  "key_type": 210,
                  "mio_slot_key_type": 210
                }
              ]
            },
            "minute_diff": {
              "attrs": [
                {
                  "attr": [
                    "minute_diff"
                  ],
                  "converter": "discrete",
                  "converter_args": "36,0,336,1,0",
                  "key_type": 205,
                  "mio_slot_key_type": 205
                }
              ]
            },
            "mmu_category_tag": {
              "attrs": [
                {
                  "attr": [
                    "mmu_category_tag"
                  ],
                  "converter": "id",
                  "key_type": 217,
                  "mio_slot_key_type": 217
                }
              ]
            },
            "mmu_emotion_tag": {
              "attrs": [
                {
                  "attr": [
                    "mmu_emotion_tag"
                  ],
                  "converter": "id",
                  "key_type": 218,
                  "mio_slot_key_type": 218
                }
              ]
            },
            "mmu_entity_list": {
              "attrs": [
                {
                  "attr": [
                    "mmu_entity_list"
                  ],
                  "converter": "list",
                  "converter_args": {
                    "enable_filter": false,
                    "limit": 10,
                    "reversed": false
                  },
                  "key_type": 219,
                  "mio_slot_key_type": 219,
                  "type": 5
                }
              ]
            },
            "realshow_cnt": {
              "attrs": [
                {
                  "attr": [
                    "realshow_cnt"
                  ],
                  "converter": "discrete",
                  "converter_args": "8000,0,100000,1,0",
                  "key_type": 405,
                  "mio_slot_key_type": 405
                }
              ]
            },
            "reply_cnt": {
              "attrs": [
                {
                  "attr": [
                    "reply_cnt"
                  ],
                  "converter": "discrete",
                  "converter_args": "5,0,100000,1,0",
                  "key_type": 204,
                  "mio_slot_key_type": 204
                }
              ]
            },
            "risk_inactive_tag": {
              "attrs": [
                {
                  "attr": [
                    "risk_inactive_tag"
                  ],
                  "converter": "id",
                  "key_type": 216,
                  "mio_slot_key_type": 216
                }
              ]
            },
            "risk_insult_tag": {
              "attrs": [
                {
                  "attr": [
                    "risk_insult_tag"
                  ],
                  "converter": "id",
                  "key_type": 214,
                  "mio_slot_key_type": 214
                }
              ]
            },
            "risk_negative_tag": {
              "attrs": [
                {
                  "attr": [
                    "risk_negative_tag"
                  ],
                  "converter": "id",
                  "key_type": 215,
                  "mio_slot_key_type": 215
                }
              ]
            },
            "rtr": {
              "attrs": [
                {
                  "attr": [
                    "rtr"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.001,0,1000,1,-1",
                  "key_type": 207,
                  "mio_slot_key_type": 207
                }
              ]
            },
            "rtr_copy": {
              "attrs": [
                {
                  "attr": [
                    "rtr_copy"
                  ],
                  "converter": "discrete",
                  "converter_args": "0.001,0,1000,137,0",
                  "key_type": 211,
                  "mio_slot_key_type": 211
                }
              ]
            },
            "showaction": {
              "attrs": [
                {
                  "attr": [
                    "showaction"
                  ],
                  "converter": "id",
                  "key_type": 208,
                  "mio_slot_key_type": 208
                }
              ]
            }
          },
          "is_common_attr": false,
          "parameters_output": "comment_item_signs",
          "slots_output": "comment_item_slots",
          "type_name": "KuibaParameterAttrEnricher"
        },
        "fetch_message_9E658F": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [
              "csv_sample_data"
            ],
            "$output_item_attrs": []
          },
          "group_id": "reco_forward_open_log",
          "hdfs_format": "raw_text",
          "hdfs_path": "viewfs:///home/reco_algorithm/dw/reco_algorithm.db/comment_model_data_zt08_dev1/datatype=0424_18_19_2hTrain",
          "output_attr": "csv_sample_data",
          "type_name": "OfflineMessageFetchEnricher"
        },
        "log_debug_info_73D63B": {
          "$metadata": {
            "$input_common_attrs": [
              "csv_sample_data"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "common_attrs": [
            "csv_sample_data"
          ],
          "for_debug_request_only": false,
          "respect_sample_logging": false,
          "type_name": "CommonRecoDebugInfoObserver"
        },
        "log_debug_info_F8CD91": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [
              "fre_grouped_predict_like_score",
              "fre_grouped_predict_reply_score",
              "fre_grouped_quality_v2_score",
              "mmu_comment_content_emb",
              "predict_like_score",
              "predict_reply_score",
              "quality_v2_score"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "for_debug_request_only": false,
          "item_attrs": [
            "mmu_comment_content_emb",
            "predict_reply_score",
            "quality_v2_score",
            "predict_like_score",
            "fre_grouped_predict_reply_score",
            "fre_grouped_quality_v2_score",
            "fre_grouped_predict_like_score"
          ],
          "respect_sample_logging": true,
          "type_name": "CommonRecoDebugInfoObserver"
        },
        "perflog_attr_value_2CC20E": {
          "$metadata": {
            "$input_common_attrs": [
              "photo_hash",
              "user_hash"
            ],
            "$input_item_attrs": [
              "comment_vv_tag",
              "field_emb",
              "fre_grouped_like_cnt",
              "fre_grouped_ltr",
              "fre_grouped_predict_like_score",
              "fre_grouped_predict_reply_score",
              "fre_grouped_quality_v2_score",
              "fre_grouped_reply_cnt",
              "fre_grouped_rtr",
              "like_reply_tr",
              "mmu_comment_content_emb",
              "predict_like_score",
              "predict_reply_score",
              "quality_v2_score"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "check_point": "send.mio.before",
          "common_attrs": [
            "user_hash",
            "photo_hash"
          ],
          "item_attrs": [
            "fre_grouped_ltr",
            "fre_grouped_rtr",
            "fre_grouped_like_cnt",
            "fre_grouped_reply_cnt",
            "field_emb",
            "like_reply_tr",
            "comment_vv_tag",
            "mmu_comment_content_emb",
            "predict_reply_score",
            "quality_v2_score",
            "predict_like_score",
            "fre_grouped_predict_reply_score",
            "fre_grouped_quality_v2_score",
            "fre_grouped_predict_like_score"
          ],
          "type_name": "CommonRecoAttrValuePerflogObserver"
        },
        "perflog_attr_value_7A479F": {
          "$metadata": {
            "$input_common_attrs": [
              "age_segment",
              "gender"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "check_point": "comment.fea",
          "common_attrs": [
            "gender",
            "age_segment"
          ],
          "type_name": "CommonRecoAttrValuePerflogObserver"
        },
        "perflog_attr_value_CF22CB": {
          "$metadata": {
            "$input_common_attrs": [
              "send_sample_cnt"
            ],
            "$input_item_attrs": [
              "expandaction",
              "expandaction_v",
              "likeaction",
              "likeaction_v",
              "replyaction",
              "replyaction_v",
              "sample_weight"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "check_point": "comment.mio.record",
          "common_attrs": [
            "send_sample_cnt"
          ],
          "item_attrs": [
            "sample_weight",
            "expandaction_v",
            "likeaction_v",
            "replyaction_v",
            "expandaction",
            "likeaction",
            "replyaction"
          ],
          "type_name": "CommonRecoAttrValuePerflogObserver"
        },
        "retrieve_from_tf_sequence_example_22B8B0": {
          "$metadata": {
            "$input_common_attrs": [
              "tf_sequence_example"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "from_extra_var": "tf_sequence_example",
          "item_key_attr": "comment_id",
          "reason": 111,
          "type_name": "OfflineTensorflowSequenceExampleRetriever"
        },
        "return__28C561": {
          "$metadata": {
            "$input_common_attrs": [
              "_if_control_attr_1"
            ],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "skip": "{{_if_control_attr_1}}",
          "status_code": 0,
          "type_name": "CommonRecoExecutionStatusEnricher"
        },
        "send_to_mio_learner_5E764C": {
          "$metadata": {
            "$input_common_attrs": [
              "comment_common_signs",
              "comment_common_slots",
              "comment_item_signs",
              "comment_item_slots",
              "comment_vv_tag",
              "expandaction",
              "expandaction_v",
              "like_cnt",
              "like_reply_tr",
              "likeaction",
              "likeaction_v",
              "ltr",
              "mmu_comment_content_emb",
              "predict_like_score",
              "predict_reply_score",
              "quality_v2_score",
              "reply_cnt",
              "replyaction",
              "replyaction_v",
              "rtr",
              "sample_weight",
              "time_ms",
              "user_hash",
              "user_id"
            ],
            "$input_item_attrs": [
              "comment_common_signs",
              "comment_common_slots",
              "comment_item_signs",
              "comment_item_slots",
              "comment_vv_tag",
              "expandaction",
              "expandaction_v",
              "like_cnt",
              "like_reply_tr",
              "likeaction",
              "likeaction_v",
              "ltr",
              "mmu_comment_content_emb",
              "predict_like_score",
              "predict_reply_score",
              "quality_v2_score",
              "reply_cnt",
              "replyaction",
              "replyaction_v",
              "rtr",
              "sample_weight"
            ],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": []
          },
          "attrs": [
            "sample_weight",
            "expandaction_v",
            "likeaction_v",
            "replyaction_v",
            "expandaction",
            "likeaction",
            "replyaction",
            "like_cnt",
            "reply_cnt",
            "ltr",
            "rtr",
            "like_reply_tr",
            "mmu_comment_content_emb",
            "predict_reply_score",
            "quality_v2_score",
            "predict_like_score",
            "comment_vv_tag"
          ],
          "label_attr": "likeaction_v",
          "lineid_attr": "user_id",
          "signs_attrs": [
            "comment_common_signs",
            "comment_item_signs"
          ],
          "slots_attrs": [
            "comment_common_slots",
            "comment_item_slots"
          ],
          "time_ms_attr": "time_ms",
          "type_name": "MioRecordChannelObserver",
          "user_hash_attr": "user_hash"
        },
        "set_attr_default_value_7EDEA9": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "audienceaction",
              "expandaction",
              "likeaction",
              "replyaction",
              "reportaction",
              "showaction"
            ]
          },
          "item_attrs": [
            {
              "name": "expandaction",
              "type": "int",
              "value": 0
            },
            {
              "name": "replyaction",
              "type": "int",
              "value": 0
            },
            {
              "name": "likeaction",
              "type": "int",
              "value": 0
            },
            {
              "name": "audienceaction",
              "type": "int",
              "value": 0
            },
            {
              "name": "reportaction",
              "type": "int",
              "value": 0
            },
            {
              "name": "showaction",
              "type": "int",
              "value": 0
            }
          ],
          "type_name": "CommonRecoAttrDefaultValueEnricher"
        },
        "set_attr_value_1DEA18": {
          "$metadata": {
            "$input_common_attrs": [],
            "$input_item_attrs": [],
            "$modify_item_tables": [],
            "$output_common_attrs": [],
            "$output_item_attrs": [
              "field_emb"
            ]
          },
          "item_attrs": [
            {
              "name": "field_emb",
              "type": "int",
              "value": 1
            }
          ],
          "type_name": "CommonRecoItemAttrDefaultValueEnricher"
        }
      },
      "type_name": "CommonRecoPipeline"
    },
    "pipeline_map": {
      "extract_fea": {
        "__PARENT": "base_pipeline",
        "pipeline": [
          "perflog_attr_value_7A479F",
          "enrich_attr_by_lua_69260D",
          "set_attr_value_1DEA18",
          "extract_kuiba_parameter_67B29A",
          "extract_kuiba_parameter_9313AE"
        ]
      },
      "read_data": {
        "__PARENT": "base_pipeline",
        "pipeline": [
          "fetch_message_9E658F",
          "log_debug_info_73D63B",
          "convert_csv_to_tf_sequence_example_613AC5",
          "retrieve_from_tf_sequence_example_22B8B0",
          "count_reco_result_667B8B",
          "_branch_controller_A93BFE5B",
          "return__28C561",
          "set_attr_default_value_7EDEA9",
          "enrich_attr_by_lua_D632EA",
          "enrich_attr_by_lua_B69D41",
          "enrich_attr_by_lua_3F9CFD"
        ]
      },
      "send_mio": {
        "__PARENT": "base_pipeline",
        "pipeline": [
          "count_reco_result_7BD7E7",
          "enrich_attr_by_lua_340738",
          "perflog_attr_value_CF22CB",
          "enrich_attr_by_lua_0C575D",
          "enrich_attr_by_lua_FB76C9",
          "perflog_attr_value_2CC20E",
          "log_debug_info_F8CD91",
          "send_to_mio_learner_5E764C"
        ]
      }
    }
  },
  "runner_pipeline_group": {
    "default_name": {
      "core_num_thread_ratio": 0.0,
      "pipeline": [
        "read_data",
        "extract_fea",
        "send_mio"
      ],
      "thread_num": -1
    }
  },
  "service_identifier": "mio_offline_runner"
}